{
  "info": {
    "name": "03-éªŒè¯ç ç™»å½•æµç¨‹",
    "description": "ä½¿ç”¨é‚®ç®±éªŒè¯ç ç™»å½•",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "1. å‘é€ç™»å½•éªŒè¯ç ",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "if (pm.response.code === 200) {",
              "    console.log('âœ“ éªŒè¯ç å·²å‘é€åˆ°é‚®ç®±');",
              "    console.log('âš ï¸ è¯·æ£€æŸ¥é‚®ç®±è·å–éªŒè¯ç ');",
              "    console.log('ğŸ’¡ æ”¶åˆ°éªŒè¯ç åï¼Œåœ¨ç¯å¢ƒå˜é‡ä¸­è®¾ç½®ï¼š');",
              "    console.log('   pm.environment.set(\"loginCode\", \"123456\")');",
              "}"
            ]
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"email\": \"2765301200@qq.com\",\n  \"type\": \"login\"\n}"
        },
        "url": {
          "raw": "http://localhost:8000/auth/send-code",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8000",
          "path": ["auth", "send-code"]
        }
      }
    },
    {
      "name": "2. éªŒè¯ç ç™»å½•",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "if (pm.response.code === 200) {",
              "    const data = pm.response.json().data;",
              "    pm.environment.set('accessToken', data.accessToken);",
              "    pm.environment.set('userUuid', data.uuid);",
              "    console.log('âœ“ ç™»å½•æˆåŠŸï¼');",
              "    console.log('ç”¨æˆ· UUID: ' + data.uuid);",
              "    console.log('ç”¨æˆ·å: ' + data.username);",
              "    console.log('é‚®ç®±: ' + data.email);",
              "    console.log('AccessToken å·²ä¿å­˜åˆ°ç¯å¢ƒå˜é‡');",
              "    console.log('');",
              "    console.log('ğŸ’¡ RefreshToken å·²ä¿å­˜åœ¨ Cookie ä¸­');",
              "}"
            ]
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"email\": \"2765301200@qq.com\",\n  \"code\": \"{{loginCode}}\"\n}"
        },
        "url": {
          "raw": "http://localhost:8000/auth/login-with-code",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8000",
          "path": ["auth", "login-with-code"]
        }
      }
    }
  ]
}
