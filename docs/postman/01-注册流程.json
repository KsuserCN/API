{
  "info": {
    "name": "01-æ³¨å†Œæµç¨‹",
    "description": "å®Œæ•´çš„ç”¨æˆ·æ³¨å†Œæµç¨‹ï¼šæ£€æŸ¥ç”¨æˆ·å â†’ å‘é€éªŒè¯ç  â†’ æ³¨å†Œ",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "1. æ£€æŸ¥ç”¨æˆ·åå¯ç”¨æ€§",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "if (pm.response.code === 200) {",
              "    const data = pm.response.json().data;",
              "    if (!data.exists) {",
              "        console.log('âœ“ ç”¨æˆ·åå¯ç”¨');",
              "    } else {",
              "        console.log('âœ— ç”¨æˆ·åå·²å­˜åœ¨ï¼Œè¯·æ›´æ¢ç”¨æˆ·å');",
              "    }",
              "}"
            ]
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:8000/auth/check-username?username=testuser",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8000",
          "path": ["auth", "check-username"],
          "query": [
            {
              "key": "username",
              "value": "testuser"
            }
          ]
        }
      }
    },
    {
      "name": "2. å‘é€æ³¨å†ŒéªŒè¯ç ",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "if (pm.response.code === 200) {",
              "    console.log('âœ“ éªŒè¯ç å·²å‘é€åˆ°é‚®ç®±');",
              "    console.log('âš ï¸ è¯·æ£€æŸ¥é‚®ç®±è·å–éªŒè¯ç ');",
              "    console.log('ğŸ’¡ æ”¶åˆ°éªŒè¯ç åï¼Œåœ¨ç¯å¢ƒå˜é‡ä¸­è®¾ç½®ï¼š');",
              "    console.log('   pm.environment.set(\"registerCode\", \"123456\")');",
              "}"
            ]
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"email\": \"2765301200@qq.com\",\n  \"type\": \"register\"\n}"
        },
        "url": {
          "raw": "http://localhost:8000/auth/send-code",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8000",
          "path": ["auth", "send-code"]
        }
      }
    },
    {
      "name": "3. æ³¨å†Œè´¦å·",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "if (pm.response.code === 200) {",
              "    const data = pm.response.json().data;",
              "    pm.environment.set('accessToken', data.accessToken);",
              "    pm.environment.set('userUuid', data.uuid);",
              "    console.log('âœ“ æ³¨å†ŒæˆåŠŸï¼');",
              "    console.log('ç”¨æˆ· UUID: ' + data.uuid);",
              "    console.log('ç”¨æˆ·å: ' + data.username);",
              "    console.log('é‚®ç®±: ' + data.email);",
              "    console.log('AccessToken å·²ä¿å­˜åˆ°ç¯å¢ƒå˜é‡');",
              "}"
            ]
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"username\": \"testuser\",\n  \"email\": \"2765301200@qq.com\",\n  \"password\": \"123456\",\n  \"code\": \"{{registerCode}}\"\n}"
        },
        "url": {
          "raw": "http://localhost:8000/auth/register",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8000",
          "path": ["auth", "register"]
        }
      }
    }
  ]
}
