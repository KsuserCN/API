# æ•æ„Ÿæ“ä½œé‚®ç®±éªŒè¯ - å®Œæ•´ Postman æµ‹è¯•æµç¨‹

æœ¬æ–‡æ¡£æä¾›äº†å®Œæ•´çš„æ­¥éª¤ï¼Œæ¼”ç¤ºå¦‚ä½•é€šè¿‡é‚®ç®±éªŒè¯ç æ–¹å¼å®Œæˆæ•æ„Ÿæ“ä½œéªŒè¯ï¼Œä»¥åŠåç»­çš„æ•æ„Ÿæ“ä½œï¼ˆå¦‚æ›´æ”¹é‚®ç®±ï¼‰ã€‚

## æµç¨‹æ¦‚è¿°

```
1. ç™»å½•è·å– AccessToken
   â†“
2. æŸ¥çœ‹æ•æ„Ÿæ“ä½œéªŒè¯çŠ¶æ€ï¼ˆå¯é€‰ï¼‰
   â†“
3. å‘é€é‚®ç®±éªŒè¯ç ï¼ˆtype: sensitive-verificationï¼‰
   â†“
4. ç”¨é‚®ç®±éªŒè¯ç è¿›è¡Œæ•æ„Ÿæ“ä½œéªŒè¯
   â†“
5. æ£€æŸ¥éªŒè¯çŠ¶æ€ï¼ˆå·²éªŒè¯ï¼‰
   â†“
6. å‘é€æ–°é‚®ç®±éªŒè¯ç ï¼ˆtype: change-emailï¼‰
   â†“
7. å®Œæˆé‚®ç®±æ›´æ”¹
```

---

## è¯¦ç»†æ­¥éª¤

### æ­¥éª¤ 1ï¼šç™»å½•è·å– AccessToken

**è¯·æ±‚æ–¹æ³•**ï¼šPOST  
**URL**ï¼šhttp://localhost:8000/auth/login  
**è¯·æ±‚å¤´**ï¼š
```
Content-Type: application/json
```

**è¯·æ±‚ä½“**ï¼š
```json
{
  "email": "user@example.com",
  "password": "password123"
}
```

**é¢„æœŸå“åº”** (200 OK)ï¼š
```json
{
  "code": 200,
  "msg": "ç™»å½•æˆåŠŸ",
  "data": {
    "uuid": "550e8400-e29b-41d4-a716-446655440000",
    "email": "user@example.com",
    "username": "username",
    "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "avatarUrl": null
  }
}
```

**å…³é”®å­—æ®µ**ï¼šä¿å­˜ `data.accessToken` ä¾›åç»­ä½¿ç”¨

---

### æ­¥éª¤ 2ï¼šæ£€æŸ¥æ•æ„Ÿæ“ä½œéªŒè¯çŠ¶æ€ï¼ˆå¯é€‰ï¼‰

**è¯·æ±‚æ–¹æ³•**ï¼šGET  
**URL**ï¼šhttp://localhost:8000/auth/check-sensitive-verification  
**è¯·æ±‚å¤´**ï¼š
```
Authorization: Bearer {accessToken}
```

**é¢„æœŸå“åº”** (200 OK)ï¼š
```json
{
  "code": 200,
  "msg": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "verified": false,
    "remainingSeconds": 0
  }
}
```

**è¯´æ˜**ï¼š
- `verified: false` - è¿˜æœªè¿›è¡Œæ•æ„Ÿæ“ä½œéªŒè¯
- `remainingSeconds: 0` - æ²¡æœ‰æœ‰æ•ˆçš„éªŒè¯

---

### æ­¥éª¤ 3ï¼šå‘é€é‚®ç®±éªŒè¯ç ï¼ˆæ•æ„Ÿæ“ä½œä¸“ç”¨ï¼‰

**è¯·æ±‚æ–¹æ³•**ï¼šPOST  
**URL**ï¼šhttp://localhost:8000/auth/send-code  
**è¯·æ±‚å¤´**ï¼š
```
Content-Type: application/json
```

**è¯·æ±‚ä½“**ï¼š
```json
{
  "type": "sensitive-verification"
}
```

**å…³é”®ç‚¹**ï¼š`type` å¿…é¡»è®¾ç½®ä¸º `"sensitive-verification"`ï¼Œå¹¶ä¸”**å¿…é¡»æºå¸¦ AccessToken**ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä½¿ç”¨å½“å‰ç™»å½•ç”¨æˆ·ç»‘å®šé‚®ç®±ã€‚

**é¢„æœŸå“åº”** (200 OK)ï¼š
```json
{
  "code": 200,
  "msg": "éªŒè¯ç å·²å‘é€"
}
```

**é‚®ä»¶å†…å®¹ç¤ºä¾‹**ï¼š
```
äº²çˆ±çš„ç”¨æˆ·ï¼Œ

æ‚¨çš„æ•æ„Ÿæ“ä½œéªŒè¯ç æ˜¯ï¼š123456

éªŒè¯ç æœ‰æ•ˆæœŸä¸º 10 åˆ†é’Ÿã€‚
```

**é‡è¦**ï¼šè®°å½•éªŒè¯ç ï¼ˆå¦‚ï¼š123456ï¼‰ï¼Œç”¨äºä¸‹ä¸€æ­¥éªŒè¯

---

### æ­¥éª¤ 4ï¼šç”¨é‚®ç®±éªŒè¯ç è¿›è¡Œæ•æ„Ÿæ“ä½œéªŒè¯

**è¯·æ±‚æ–¹æ³•**ï¼šPOST  
**URL**ï¼šhttp://localhost:8000/auth/verify-sensitive  
**è¯·æ±‚å¤´**ï¼š
```
Authorization: Bearer {accessToken}
Content-Type: application/json
```

**è¯·æ±‚ä½“**ï¼š
```json
{
  "method": "email-code",
  "code": "123456"
}
```

**å…³é”®ç‚¹**ï¼š
- `method` è®¾ç½®ä¸º `"email-code"`
- `code` å¡«å…¥æ”¶åˆ°çš„éªŒè¯ç 

**é¢„æœŸå“åº”** (200 OK)ï¼š
```json
{
  "code": 200,
  "msg": "éªŒè¯æˆåŠŸï¼Œæœ‰æ•ˆæœŸ15åˆ†é’Ÿ"
}
```

**è¯´æ˜**ï¼š
- éªŒè¯æˆåŠŸåï¼Œç”¨æˆ·çš„æ•æ„Ÿæ“ä½œéªŒè¯çŠ¶æ€å°†è¢«æ ‡è®°ä¸ºå·²éªŒè¯
- æœ‰æ•ˆæœŸä¸º 15 åˆ†é’Ÿ
- éªŒè¯ä¸è®¾å¤‡ï¼ˆIPï¼‰ç»‘å®š

---

### æ­¥éª¤ 5ï¼šæ£€æŸ¥æ•æ„Ÿæ“ä½œéªŒè¯çŠ¶æ€ï¼ˆéªŒè¯åï¼‰

**è¯·æ±‚æ–¹æ³•**ï¼šGET  
**URL**ï¼šhttp://localhost:8000/auth/check-sensitive-verification  
**è¯·æ±‚å¤´**ï¼š
```
Authorization: Bearer {accessToken}
```

**é¢„æœŸå“åº”** (200 OK)ï¼š
```json
{
  "code": 200,
  "msg": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "verified": true,
    "remainingSeconds": 850
  }
}
```

**è¯´æ˜**ï¼š
- `verified: true` - å·²å®Œæˆæ•æ„Ÿæ“ä½œéªŒè¯
- `remainingSeconds: 850` - è¿˜æœ‰çº¦ 850 ç§’ï¼ˆ14 åˆ†é’Ÿï¼‰çš„æœ‰æ•ˆæœŸ

---

### æ­¥éª¤ 6ï¼šå‘é€æ–°é‚®ç®±éªŒè¯ç 

**è¯·æ±‚æ–¹æ³•**ï¼šPOST  
**URL**ï¼šhttp://localhost:8000/auth/send-code  
**è¯·æ±‚å¤´**ï¼š
```
Content-Type: application/json
```

**è¯·æ±‚ä½“**ï¼š
```json
{
  "email": "new-email@example.com",
  "type": "change-email"
}
```

**é¢„æœŸå“åº”** (200 OK)ï¼š
```json
{
  "code": 200,
  "msg": "éªŒè¯ç å·²å‘é€"
}
```

**é‡è¦**ï¼šè®°å½•æ–°é‚®ç®±çš„éªŒè¯ç 

---

### æ­¥éª¤ 7ï¼šå®Œæˆé‚®ç®±æ›´æ”¹

**è¯·æ±‚æ–¹æ³•**ï¼šPOST  
**URL**ï¼šhttp://localhost:8000/auth/change-email  
**è¯·æ±‚å¤´**ï¼š
```
Authorization: Bearer {accessToken}
Content-Type: application/json
```

**è¯·æ±‚ä½“**ï¼š
```json
{
  "newEmail": "new-email@example.com",
  "code": "654321"
}
```

**é¢„æœŸå“åº”** (200 OK)ï¼š
```json
{
  "code": 200,
  "msg": "é‚®ç®±æ›´æ”¹æˆåŠŸ",
  "data": {
    "uuid": "550e8400-e29b-41d4-a716-446655440000",
    "email": "new-email@example.com",
    "username": "username",
    "avatarUrl": null
  }
}
```

**å®Œæˆ**ï¼šé‚®ç®±å·²æˆåŠŸæ›´æ”¹ä¸ºæ–°é‚®ç®±åœ°å€

---

## Postman é›†åˆ JSONï¼ˆå¯ç›´æ¥å¯¼å…¥ï¼‰

```json
{
  "info": {
    "name": "æ•æ„Ÿæ“ä½œé‚®ç®±éªŒè¯æµç¨‹",
    "description": "å®Œæ•´çš„é‚®ç®±éªŒè¯æ•æ„Ÿæ“ä½œå’Œæ›´æ”¹é‚®ç®±æµç¨‹",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "1. ç™»å½•",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "if (pm.response.code === 200) {",
              "    const data = pm.response.json().data;",
              "    pm.environment.set('accessToken', data.accessToken);",
              "    console.log('AccessToken å·²ä¿å­˜');",
              "}"
            ]
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"email\": \"user@example.com\",\n  \"password\": \"password123\"\n}"
        },
        "url": {
          "raw": "http://localhost:8000/auth/login",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8000",
          "path": ["auth", "login"]
        }
      }
    },
    {
      "name": "2. æ£€æŸ¥æ•æ„Ÿæ“ä½œéªŒè¯çŠ¶æ€ï¼ˆéªŒè¯å‰ï¼‰",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Authorization",
            "value": "Bearer {{accessToken}}"
          }
        ],
        "url": {
          "raw": "http://localhost:8000/auth/check-sensitive-verification",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8000",
          "path": ["auth", "check-sensitive-verification"]
        }
      }
    },
    {
      "name": "3. å‘é€æ•æ„Ÿæ“ä½œé‚®ç®±éªŒè¯ç ",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "console.log('âœ“ éªŒè¯ç å·²å‘é€åˆ°ç”¨æˆ·é‚®ç®±');",
              "console.log('âš ï¸ è¯·æ£€æŸ¥é‚®ç®±è·å–éªŒè¯ç ');",
              "console.log('ğŸ’¡ åœ¨ Postman ç¯å¢ƒå˜é‡ä¸­è®¾ç½®: pm.environment.set(\"sensitiveVerificationCode\", \"123456\")')"
            ]
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Authorization",
            "value": "Bearer {{accessToken}}"
          },
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"type\": \"sensitive-verification\"\n}"
        },
        "url": {
          "raw": "http://localhost:8000/auth/send-code",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8000",
          "path": ["auth", "send-code"]
        }
      }
    },
    {
      "name": "4. ç”¨é‚®ç®±éªŒè¯ç è¿›è¡Œæ•æ„Ÿæ“ä½œéªŒè¯",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "if (pm.response.code === 200) {",
              "    console.log('âœ“ æ•æ„Ÿæ“ä½œéªŒè¯æˆåŠŸï¼æœ‰æ•ˆæœŸ 15 åˆ†é’Ÿ');",
              "    pm.environment.set('verificationTime', new Date().getTime());",
              "}"
            ]
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Authorization",
            "value": "Bearer {{accessToken}}"
          },
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"method\": \"email-code\",\n  \"code\": \"{{sensitiveVerificationCode}}\"\n}"
        },
        "url": {
          "raw": "http://localhost:8000/auth/verify-sensitive",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8000",
          "path": ["auth", "verify-sensitive"]
        }
      }
    },
    {
      "name": "5. æ£€æŸ¥æ•æ„Ÿæ“ä½œéªŒè¯çŠ¶æ€ï¼ˆéªŒè¯åï¼‰",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Authorization",
            "value": "Bearer {{accessToken}}"
          }
        ],
        "url": {
          "raw": "http://localhost:8000/auth/check-sensitive-verification",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8000",
          "path": ["auth", "check-sensitive-verification"]
        }
      }
    },
    {
      "name": "6. å‘é€æ–°é‚®ç®±éªŒè¯ç ",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "console.log('âœ“ éªŒè¯ç å·²å‘é€åˆ°æ–°é‚®ç®±');",
              "console.log('âš ï¸ è¯·æ£€æŸ¥æ–°é‚®ç®±è·å–éªŒè¯ç ');",
              "console.log('ğŸ’¡ åœ¨ Postman ç¯å¢ƒå˜é‡ä¸­è®¾ç½®: pm.environment.set(\"changeEmailCode\", \"654321\")')"
            ]
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"email\": \"new-email@example.com\",\n  \"type\": \"change-email\"\n}"
        },
        "url": {
          "raw": "http://localhost:8000/auth/send-code",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8000",
          "path": ["auth", "send-code"]
        }
      }
    },
    {
      "name": "7. å®Œæˆé‚®ç®±æ›´æ”¹",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "if (pm.response.code === 200) {",
              "    const data = pm.response.json().data;",
              "    console.log('âœ“ é‚®ç®±å·²æˆåŠŸæ›´æ”¹ä¸º: ' + data.email);",
              "    console.log('ä¸‹æ¬¡ç™»å½•æ—¶éœ€è¦ä½¿ç”¨æ–°é‚®ç®±: ' + data.email);",
              "}"
            ]
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Authorization",
            "value": "Bearer {{accessToken}}"
          },
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"newEmail\": \"new-email@example.com\",\n  \"code\": \"654321\"\n}"
        },
        "url": {
          "raw": "http://localhost:8000/auth/change-email",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8000",
          "path": ["auth", "change-email"]
        }
      }
    }
  ]
}
```

---

## Postman ç¯å¢ƒå˜é‡è®¾ç½®

ä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œå»ºè®®åœ¨ Postman ä¸­åˆ›å»ºä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

| å˜é‡å | åˆå§‹å€¼ | ç”¨é€” |
|--------|--------|------|
| `accessToken` | - | ç™»å½•åè‡ªåŠ¨è®¾ç½® |
| `sensitiveVerificationCode` | æ‰‹åŠ¨è¾“å…¥ | æ•æ„Ÿæ“ä½œé‚®ç®±éªŒè¯ç  |
| `changeEmailCode` | æ‰‹åŠ¨è¾“å…¥ | æ–°é‚®ç®±éªŒè¯ç  |

**åœ¨ Postman ä¸­åˆ›å»ºç¯å¢ƒ**ï¼š
1. ç‚¹å‡»å³ä¸Šè§’çš„é½¿è½®å›¾æ ‡
2. é€‰æ‹© "Manage Environments"
3. ç‚¹å‡» "Add" åˆ›å»ºæ–°ç¯å¢ƒ
4. è¾“å…¥ç¯å¢ƒåç§°ï¼šå¦‚ "Local API"
5. æ·»åŠ ä¸Šè¿°å˜é‡

---

## é”™è¯¯å¤„ç†å’Œå¸¸è§é—®é¢˜

### 1. éªŒè¯ç å·²è¿‡æœŸ

**é”™è¯¯å“åº”**ï¼š
```json
{
  "code": 400,
  "msg": "éªŒè¯ç å·²è¿‡æœŸï¼Œè¯·é‡æ–°è·å–ï¼ˆ1/5ï¼‰"
}
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- é‡æ–°æ‰§è¡Œæ­¥éª¤ 3ï¼ˆå‘é€é‚®ç®±éªŒè¯ç ï¼‰
- éªŒè¯ç æœ‰æ•ˆæœŸä¸º 10 åˆ†é’Ÿ

### 2. IP ä¸åŒ¹é…

**é”™è¯¯å“åº”**ï¼š
```json
{
  "code": 400,
  "msg": "å‘é€éªŒè¯ç çš„è®¾å¤‡ä¸å½“å‰è®¾å¤‡ä¸åŒ¹é…ï¼ˆ1/5ï¼‰"
}
```

**åŸå› **ï¼š
- å‘é€éªŒè¯ç å’ŒéªŒè¯éªŒè¯ç æ¥è‡ªä¸åŒçš„ IP åœ°å€
- ä¸è¦åœ¨ VPN è¿æ¥ä¸­é€”åˆ‡æ¢

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®ä¿ä»åŒä¸€è®¾å¤‡ä¸Šæ‰§è¡Œæ‰€æœ‰æ­¥éª¤
- ä¸è¦åˆ‡æ¢ç½‘ç»œæˆ– VPN

### 3. éªŒè¯è¿‡æœŸï¼ˆæ•æ„Ÿæ“ä½œï¼‰

**é”™è¯¯å“åº”**ï¼š
```json
{
  "code": 400,
  "msg": "éªŒè¯è¿‡æœŸï¼Œè¯·é‡æ–°è¿›è¡Œæ•æ„Ÿæ“ä½œéªŒè¯"
}
```

**åŸå› **ï¼š
- 15 åˆ†é’Ÿå†…æœªå®Œæˆåç»­æ•æ„Ÿæ“ä½œ

**è§£å†³æ–¹æ¡ˆ**ï¼š
- é‡æ–°æ‰§è¡Œæ•æ„Ÿæ“ä½œéªŒè¯ï¼ˆæ­¥éª¤ 3-4ï¼‰

### 4. é‚®ç®±å·²è¢«ä½¿ç”¨

**é”™è¯¯å“åº”**ï¼š
```json
{
  "code": 409,
  "msg": "é‚®ç®±å·²è¢«ä½¿ç”¨"
}
```

**åŸå› **ï¼š
- æ–°é‚®ç®±å·²è¢«å…¶ä»–ç”¨æˆ·æ³¨å†Œ

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨æœªè¢«æ³¨å†Œçš„é‚®ç®±

### 5. éªŒè¯ç é”™è¯¯ 5 æ¬¡

**é”™è¯¯å“åº”**ï¼š
```json
{
  "code": 429,
  "msg": "éªŒè¯ç é”™è¯¯æ¬¡æ•°è¿‡å¤šï¼Œè¯¥é‚®ç®±å·²è¢«é”å®š1å°æ—¶"
}
```

**åŸå› **ï¼š
- è¿ç»­è¾“å…¥é”™è¯¯éªŒè¯ç  5 æ¬¡

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç­‰å¾… 1 å°æ—¶åé‡è¯•
- æˆ–è€…ä½¿ç”¨å¯†ç æ–¹å¼è¿›è¡Œæ•æ„Ÿæ“ä½œéªŒè¯

---

## å…³é”®ç‚¹æ€»ç»“

| é¡¹ç›® | è¯´æ˜ |
|------|------|
| **æ•æ„Ÿæ“ä½œéªŒè¯ç±»å‹** | `type: "sensitive-verification"` |
| **æ•æ„Ÿæ“ä½œéªŒè¯æ–¹å¼** | `method: "email-code"` |
| **éªŒè¯æœ‰æ•ˆæœŸ** | 15 åˆ†é’Ÿ |
| **éªŒè¯ç æœ‰æ•ˆæœŸ** | 10 åˆ†é’Ÿ |
| **è®¾å¤‡ç»‘å®š** | å¿…é¡»ä»åŒä¸€ IP å®ŒæˆéªŒè¯å’Œæ“ä½œ |
| **é”™è¯¯é™åˆ¶** | 5 æ¬¡é”™è¯¯åé”å®š 1 å°æ—¶ |

---

## æµ‹è¯•æµç¨‹æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç™»å½•è·å– AccessToken                                        â”‚
â”‚ POST /auth/login                                            â”‚
â”‚ å“åº”: accessToken                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ£€æŸ¥éªŒè¯çŠ¶æ€ï¼ˆå¯é€‰ï¼‰- verified: false                       â”‚
â”‚ GET /auth/check-sensitive-verification                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‘é€é‚®ç®±éªŒè¯ç ï¼ˆæ•æ„Ÿæ“ä½œä¸“ç”¨ï¼‰                              â”‚
â”‚ POST /auth/send-code                                        â”‚
â”‚ type: "sensitive-verification"                              â”‚
â”‚ âš ï¸ è®°å½•é‚®ç®±ä¸­æ”¶åˆ°çš„éªŒè¯ç                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”¨é‚®ç®±éªŒè¯ç è¿›è¡Œæ•æ„Ÿæ“ä½œéªŒè¯                                â”‚
â”‚ POST /auth/verify-sensitive                                 â”‚
â”‚ method: "email-code", code: "xxxxxx"                        â”‚
â”‚ å“åº”: éªŒè¯æˆåŠŸï¼Œæœ‰æ•ˆæœŸ15åˆ†é’Ÿ                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ£€æŸ¥éªŒè¯çŠ¶æ€ï¼ˆå·²éªŒè¯ï¼‰- verified: true                      â”‚
â”‚ GET /auth/check-sensitive-verification                      â”‚
â”‚ remainingSeconds: çº¦ 850                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‘é€æ–°é‚®ç®±éªŒè¯ç                                             â”‚
â”‚ POST /auth/send-code                                        â”‚
â”‚ type: "change-email"                                        â”‚
â”‚ âš ï¸ è®°å½•æ–°é‚®ç®±ä¸­æ”¶åˆ°çš„éªŒè¯ç                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®Œæˆé‚®ç®±æ›´æ”¹                                                â”‚
â”‚ POST /auth/change-email                                     â”‚
â”‚ newEmail: "new-email@example.com", code: "yyyyyy"           â”‚
â”‚ å“åº”: é‚®ç®±å·²æ›´æ”¹ä¸º new-email@example.com                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸å¯†ç éªŒè¯æ–¹å¼çš„å¯¹æ¯”

### é‚®ç®±éªŒè¯æ–¹å¼ï¼ˆæœ¬æ–‡æ¡£ï¼‰
```json
POST /auth/verify-sensitive
{
  "method": "email-code",
  "code": "123456"
}
```

**ä¼˜ç‚¹**ï¼š
- ä¸éœ€è¦è¾“å…¥å¯†ç 
- é€‚åˆå¿˜è®°å¯†ç çš„æƒ…å†µ
- é€šè¿‡é‚®ç®±éªŒè¯æä¾›é¢å¤–çš„å®‰å…¨æ€§

### å¯†ç éªŒè¯æ–¹å¼
```json
POST /auth/verify-sensitive
{
  "method": "password",
  "password": "myPassword123"
}
```

**ä¼˜ç‚¹**ï¼š
- å¿«é€ŸéªŒè¯
- ä¸éœ€è¦ç­‰å¾…é‚®ä»¶
- æ— éœ€é‚®ç®±è®¿é—®

---

## ä¸‹ä¸€æ­¥

å®Œæˆé‚®ç®±æ›´æ”¹åï¼Œç”¨æˆ·ï¼š
- ä¸‹æ¬¡ç™»å½•éœ€è¦ä½¿ç”¨æ–°é‚®ç®±åœ°å€
- æ—§é‚®ç®±å°†ä¸å†å…³è”æ­¤è´¦æˆ·
- æ–°é‚®ç®±ç°åœ¨ç”¨äºéªŒè¯ç æ¥æ”¶å’Œè´¦æˆ·æ¢å¤

## ç›¸å…³æ–‡æ¡£
- [æ•æ„Ÿæ“ä½œéªŒè¯æ¥å£](auth-verify-sensitive.md)
- [æ›´æ”¹é‚®ç®±æ¥å£](auth-change-email.md)
- [æ£€æŸ¥éªŒè¯çŠ¶æ€æ¥å£](auth-check-sensitive-verification.md)
- [å‘é€éªŒè¯ç æ¥å£](auth-send-code.md)
