# Basic
spring.application.name=auth
server.port=8000
app.debug=${DEBUG:false}

# Mysql
spring.datasource.url=${DB_URL:}
spring.datasource.driverClassName=com.mysql.cj.jdbc.Driver
spring.datasource.username=${DB_USERNAME:}
spring.datasource.password=${DB_PASSWORD:}
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.open-in-view=false

# Redis
spring.data.redis.host=${REDIS_HOST:127.0.0.1}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.timeout=5000

# JWT
jwt.secret=${JWT_SECRET:ksuser-very-secret-key-2026-abc}
jwt.access-token-expiration=${JWT_ACCESS_TOKEN_EXPIRATION:900000}
jwt.refresh-token-expiration=${JWT_REFRESH_TOKEN_EXPIRATION:604800000}

# SMTP
spring.mail.host=${MAIL_HOST:smtp.exmail.qq.com}
spring.mail.port=${MAIL_PORT:465}
spring.mail.username=${MAIL_USERNAME:}
spring.mail.password=${MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.ssl.enable=true
spring.mail.properties.mail.smtp.socketFactory.fallback=false
spring.mail.default-encoding=UTF-8

# Log
logging.level.root=INFO
logging.level.cn.ksuser.api=DEBUG

# 速率限制配置（验证码发送）
app.rate-limit.send-code-email-per-minute=1
app.rate-limit.send-code-email-per-hour=14
app.rate-limit.send-code-ip-per-minute=3
app.rate-limit.send-code-ip-per-hour=14

# 速率限制配置（密码登录）
app.rate-limit.login-email-per-minute=5
app.rate-limit.login-email-per-hour=60
app.rate-limit.login-ip-per-minute=10
app.rate-limit.login-ip-per-hour=120

# 密码策略
app.password.min-length=6
app.password.max-length=66
app.password.require-uppercase=false
app.password.require-lowercase=false
app.password.require-digits=true
app.password.require-special-chars=false

# Token 配置
app.token.blacklist-enabled=true
app.token.refresh-rotation-enabled=true

# 敏感操作配置
app.sensitive-operation.verification-duration-minutes=15
app.sensitive-operation.require-ip-match=true

# 安全 Header
server.servlet.session.cookie.http-only=true
## 开发环境跨域 HTTP 使用 Lax，前后端跨域但在同一本地机器
server.servlet.session.cookie.secure=false
server.servlet.session.cookie.same-site=lax

# 请求大小限制
server.tomcat.max-http-form-post-size=1048576
# spring.mvc.max-request-body-size=1048576